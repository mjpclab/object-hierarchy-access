!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e=e||self).ObjectHierarchyAccess={})}(this,function(e){"use strict";function v(e){return Array.isArray(e)||e instanceof Array}function u(n){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n).filter(function(e){var r=Object.getOwnPropertyDescriptor(n,e);return r&&r.enumerable});r.length&&e.push.apply(e,r)}return e}function s(e){return v(e)?[]:"object"==typeof e&&null!==e?{}:e}function d(e,r){var n=r.name,t=r.getName;return n!==undefined?n:t&&t.call(e,e)||"undefined"}function p(e,r){var n=r.names,t=r.getNames;if(n!==undefined)return v(n)?n:[n];if(t){var a=t.call(e,e);if(a!==undefined)return v(a)?a:[a]}return u(e)}function t(e,r,s){var h=e;return r.forEach(function(e){var r=function v(e){return"object"==typeof e&&null!==e?e:"function"==typeof e?{getName:e,value:{}}:{name:e,value:{}}}(e),n=r.value,t=r.type,a=r.create,u=r.override,o=r.created,f=r.skipped,c=r.got,i=d(h,r);if(s||u||!h[i]||"object"!=typeof h[i]){var l=n||(t?new t:a?a.call(h,h,i):{});h[i]=l,o&&o.call(h,h,i,l)}else f&&f.call(h,h,i,h[i]);var p=h;h=h[i],c&&c.call(p,p,i,h)}),h}function i(e,r){return t(e,r)}function a(e,r){var n=t(e,r.slice(0,-1));return{current:n,last:t(n,r.slice(-1),!0)}}function l(e){var r=e[e.length-1],n=Array.prototype.concat.apply([],e.slice(0,-1));return{hierarchies:n.slice(0,-1),prop:n[n.length-1],value:r}}function o(e){var r=[];return r=Array.prototype.concat.apply(r,e)}function h(e){return"object"==typeof e?e:"function"==typeof e?{getName:e}:{name:e}}function y(e,r,n){var t=e[r],a=n.got;return a&&a.call(e,e,r,t),t}function g(e){var r=e[e.length-1];return{hierarchies:Array.prototype.concat.apply([],e.slice(0,-1)),callback:r}}function m(e){return v(e)?{names:e}:"object"==typeof e&&null!==e?e:"function"==typeof e?{getNames:e}:{names:e}}function b(e,r,n){var t=n.got,a=n.mapName,u=n.mapValue,o=n.mapped,f=e[r];t&&t.call(e,e,r,f);var c=a?a.call(e,e,r,f):r,i=u?u.call(e,e,r,f):f;return o&&o.call(e,e,c,i),{mappedName:c,mappedValue:i}}function f(e){return"object"==typeof e&&null!==e?e:"function"==typeof e?{by:e}:{}}function j(e,r){var n=e.type,t=e.create;return n?new n:t?t.call(r,r):{}}e.assign=function c(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=l(r),a=t.hierarchies,u=t.prop,o=t.value,f=i(e,a);return f[u]=o,f},e.assignIfUndef=function P(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=l(r),a=t.hierarchies,u=t.prop,o=t.value,f=i(e,a);return f[u]===undefined&&(f[u]=o),f},e.assignProp=function O(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return a(e,o(r)).current},e.assignPropIfUndef=function A(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=o(r),a=i(e,t.slice(0,-1));return i(a,t.slice(-1)),a},e.get=function N(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=[];t=Array.prototype.concat.apply(t,r);var a=e;return a!==undefined&&null!==a&&t.every(function(e){var r=h(e),n=d(a,r),t=y(a,n,r);return a=t}),a},e.group=function k(i){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(!e.length)return i;var n=e.map(f).filter(function(e){return e.by});if(!n)return i;var l,p=n.length-1;return u(i).forEach(function(u){var o,f,c=i[u];n.forEach(function(e,r){var n=e.by;o=0===r?(l||(l=j(e,i)),l):(o[f]||(o[f]=j(e,i)),o[f]);var t=n.call(i,i,u,c);if(r!==p)f=t;else{o[t]||(o[t]=s(i));var a=o[t];v(a)?a.push(c):a[u]=c}})}),l},e.pick=function I(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=[];return e!==undefined&&null!==e&&function c(n,t,a,u){var o=m(a[u]),e=p(n,o),f=a.length-1;e.forEach(function(e){if(e in n){var r=b(n,e,o).mappedValue;u<f?c(r,t,a,u+1):t.push(r)}})}(e,t,r,0),t},e.put=function U(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=l(r),a=t.hierarchies,u=t.prop,o=t.value;return i(e,a)[u]=o},e.putIfUndef=function w(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=l(r),a=t.hierarchies,u=t.prop,o=t.value,f=i(e,a);return f[u]===undefined&&(f[u]=o),f[u]},e.putProp=function E(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return a(e,o(r)).last},e.putPropIfUndef=function V(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return i(e,o(r))},e.select=function x(e){for(var r,n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return e!==undefined&&null!==e&&function l(a,u,o,f){var c=m(o[f]),e=p(a,c),i=o.length-1;e.forEach(function(e){if(e in a){var r=b(a,e,c),n=r.mappedName,t=r.mappedValue;u[n]=f<i?s(t):t,f<i&&"object"==typeof t&&null!==t&&l(t,u[n],o,f+1)}})}(e,r=s(e),n,0),r},e.set=function S(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=l(r),a=t.hierarchies,u=t.prop,o=t.value,f=e||{};return i(f,a)[u]=o,f},e.setIfUndef=function _(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=l(r),a=t.hierarchies,u=t.prop,o=t.value,f=e||{},c=i(f,a);return c[u]===undefined&&(c[u]=o),f},e.setProp=function D(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=e||{};return a(t,o(r)),t},e.setPropIfUndef=function H(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=e||{};return i(t,o(r)),t},e.traverse=function M(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=g(r),a=t.hierarchies,u=t.callback,o=e;o!==undefined&&null!==o&&a.every(function(e){var r=h(e),n=d(o,r),t=y(o,n,r),a=o;return o=t,!1!==u.call(a,a,n,o)})},e.traverseReverse=function R(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=g(r),a=t.hierarchies,u=t.callback,o=e;if(o!==undefined&&null!==o){var f=[];a.every(function(e){var r=h(e),n=d(o,r),t=y(o,n,r),a=o;return o=t,f.push({parent:a,name:n,current:o}),o});for(var c=f.length-1;0<=c;c--){var i=f[c];if(!1===u.call(i.parent,i.parent,i.name,i.current))break}}},Object.defineProperty(e,"__esModule",{value:!0})});
