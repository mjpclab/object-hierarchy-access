!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e=e||self).ObjectHierarchyAccess={})}(this,function(e){"use strict";function p(e){return Array.isArray(e)||e instanceof Array}function o(n){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n).filter(function(e){var r=Object.getOwnPropertyDescriptor(n,e);return r&&r.enumerable});r.length&&e.push.apply(e,r)}return e}function s(e){return p(e)?[]:"object"==typeof e?{}:e}function g(e,r){var n=r.name,t=r.getName;return n!==undefined?n:t&&t.call(e,e)||"undefined"}function i(e,r){var n=r.names,t=r.getNames;if(n!==undefined)return p(n)?n:[n];if(t){var a=t.call(e,e);if(a!==undefined)return p(a)?a:[a]}return o(e)}function t(e,r,s){var h=e;return r.forEach(function(e){var r=function p(e){return"object"==typeof e?e:"function"==typeof e?{getName:e,value:{}}:{name:e,value:{}}}(e),n=r.value,t=r.type,a=r.create,o=r.override,u=r.created,f=r.skipped,c=r.got,i=g(h,r);if(s||o||!h[i]||"object"!=typeof h[i]){var l=n||(t?new t:a?a.call(h,h,i):{});h[i]=l,u&&u.call(h,h,i,l)}else f&&f.call(h,h,i,h[i]);var v=h;h=h[i],c&&c.call(v,v,i,h)}),h}function l(e,r){return t(e,r)}function a(e,r){var n=t(e,r.slice(0,-1));return{current:n,last:t(n,r.slice(-1),!0)}}function v(e){var r=e[e.length-1],n=Array.prototype.concat.apply([],e.slice(0,-1));return{hierarchies:n.slice(0,-1),prop:n[n.length-1],value:r}}function u(e){var r=[];return r=Array.prototype.concat.apply(r,e)}function h(e){return"object"==typeof e?e:"function"==typeof e?{getName:e}:{name:e}}function y(e){var r=e[e.length-1];return{hierarchies:Array.prototype.concat.apply([],e.slice(0,-1)),callback:r}}function d(e){return p(e)?{names:e}:"object"==typeof e?e:"function"==typeof e?{getNames:e}:{names:e}}function f(e){return"object"==typeof e?e:"function"==typeof e?{by:e}:{}}function b(e){return e?new e:{}}e.set=function c(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=v(r),a=t.hierarchies,o=t.prop,u=t.value,f=e||{};return l(f,a)[o]=u,f},e.assign=function m(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=v(r),a=t.hierarchies,o=t.prop,u=t.value,f=l(e,a);return f[o]=u,f},e.put=function j(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=v(r),a=t.hierarchies,o=t.prop,u=t.value;return l(e,a)[o]=u},e.setIfUndef=function P(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=v(r),a=t.hierarchies,o=t.prop,u=t.value,f=e||{},c=l(f,a);return c[o]===undefined&&(c[o]=u),f},e.assignIfUndef=function O(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=v(r),a=t.hierarchies,o=t.prop,u=t.value,f=l(e,a);return f[o]===undefined&&(f[o]=u),f},e.putIfUndef=function A(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=v(r),a=t.hierarchies,o=t.prop,u=t.value,f=l(e,a);return f[o]===undefined&&(f[o]=u),f[o]},e.setProp=function k(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=e||{};return a(t,u(r)),t},e.assignProp=function I(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return a(e,u(r)).current},e.putProp=function U(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return a(e,u(r)).last},e.setPropIfUndef=function w(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=e||{};return l(t,u(r)),t},e.assignPropIfUndef=function E(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=u(r),a=l(e,t.slice(0,-1));return l(a,t.slice(-1)),a},e.putPropIfUndef=function N(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return l(e,u(r))},e.get=function x(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=[];t=Array.prototype.concat.apply(t,r);var o=e;return o!==undefined&&null!==o&&t.every(function(e){var r=h(e),n=r.got,t=g(o,r),a=o;return o=o[t],n&&n.call(a,a,t,o),o}),o},e.traverse=function S(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=y(r),a=t.hierarchies,o=t.callback,u=e;u!==undefined&&null!==u&&a.every(function(e){var r=h(e),n=r.got,t=g(u,r),a=u;return u=u[t],n&&n.call(a,a,t,u),!1!==o.call(a,a,t,u)})},e.traverseReverse=function _(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=y(r),a=t.hierarchies,o=t.callback,u=e;if(u!==undefined&&null!==u){var f=[];a.every(function(e){var r=h(e),n=r.got,t=g(u,r),a=u;return u=u[t],n&&n.call(a,a,t,u),f.push({parent:a,name:t,current:u}),u});for(var c=f.length-1;0<=c;c--){var i=f[c];if(!1===o.call(i.parent,i.parent,i.name,i.current))break}}},e.select=function D(e){for(var r,n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return e!==undefined&&null!==e&&function c(n,t,a,o){var e=d(a[o]),u=e.got,r=i(n,e),f=a.length-1;r.forEach(function(e){if(e in n){var r=n[e];u&&u.call(n,n,e,r),t[e]=o<f?s(r):r,o<f&&t!==undefined&&"object"==typeof r&&c(r,t[e],a,o+1)}})}(e,r=s(e),n,0),r},e.pick=function H(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=[];return e!==undefined&&null!==e&&function c(n,t,a,o){var e=d(a[o]),u=e.got,r=i(n,e),f=a.length-1;r.forEach(function(e){if(e in n){var r=n[e];u&&u.call(n,n,e,r),o<f?c(r,t,a,o+1):t.push(r)}})}(e,t,r,0),t},e.group=function M(l){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(!e.length)return l;var n=e.map(f).filter(function(e){return e.by});if(!n)return l;var v=n.length-1,t=o(l),a=b(n[0].type);return t.forEach(function(u){var f,c=l[u],i=a;n.forEach(function(e,r){var n=e.type,t=e.by;0<r&&(i[f]||(i[f]=b(n)),i=i[f]);var a=t.call(l,l,u,c);if(r!==v)f=a;else{i[a]||(i[a]=s(l));var o=i[a];p(o)?o.push(c):o[u]=c}})}),a},Object.defineProperty(e,"__esModule",{value:!0})});
