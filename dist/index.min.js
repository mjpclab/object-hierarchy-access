!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((r=r||self).ObjectHierarchyAccess={})}(this,function(r){"use strict";function v(r){return Array.isArray(r)||r instanceof Array}function h(r){return"object"==typeof r&&null!==r}function s(n){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n).filter(function(r){var e=Object.getOwnPropertyDescriptor(n,r);return e&&e.enumerable});e.length&&r.push.apply(r,e)}return r}function y(r){return v(r)?[]:h(r)?{}:r}function d(r,e){var n=e.name,t=e.getName;return n!==undefined?n:t?t.call(r,r):void 0}function p(r,e){var n=e.names,t=e.getNames;if(n!==undefined)return v(n)?n:[n];if(t){var a=t.call(r,r);if(a!==undefined)return v(a)?a:[a]}return s(r)}function t(r,e,s){var y=r;return e.forEach(function(r){var e=function v(r){return"object"==typeof r&&null!==r?r:"function"==typeof r?{getName:r,value:{}}:{name:r,value:{}}}(r),n=e.value,t=e.type,a=e.create,u=e.override,o=e.created,f=e.skipped,c=e.got,i=function h(r,e){var n=d(r,e);return n!==undefined?n:"undefined"}(y,e);if(s||u||!y[i]||"object"!=typeof y[i]){var l=n||(t?new t:a?a.call(y,y,i):{});y[i]=l,o&&o.call(y,y,i,l)}else f&&f.call(y,y,i,y[i]);var p=y;y=y[i],c&&c.call(p,p,i,y)}),y}function i(r,e){return t(r,e)}function a(r,e){var n=t(r,e.slice(0,-1));return{current:n,last:t(n,e.slice(-1),!0)}}function l(r){var e=r[r.length-1],n=Array.prototype.concat.apply([],r.slice(0,-1));return{hierarchies:n.slice(0,-1),prop:n[n.length-1],value:e}}function u(r){return Array.prototype.concat.apply([],r)}function g(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var t=r||{};return a(t,u(e)),t}function m(r){return"object"==typeof r?r:"function"==typeof r?{getValue:r}:{name:r}}function b(r,e){var n,t=e.getValue,a=d(r,e);a!==undefined?n=r[a]:(a="undefined",t&&(n=t.call(r,r)));var u=e.got;return u&&u.call(r,r,a,n),{name:a,value:n}}function c(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var t=Array.prototype.concat.apply([],e),a=r;return a!==undefined&&null!==a&&t.every(function(r){var e=m(r),n=b(a,e).value;return a=n}),a}function j(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(r===undefined||null===r)return!1;for(var t=Array.prototype.concat.apply([],e),a=r,u=0;u<t.length;u++){var o=t[u];if(!(a&&o in a))return!1;a=a[o]}return!0}function A(r){var e=r[r.length-1];return{hierarchies:Array.prototype.concat.apply([],r.slice(0,-1)),callback:e}}function O(r){return v(r)?{names:r}:"object"==typeof r&&null!==r?r:"function"==typeof r?{getNames:r}:{names:r}}function P(r,e,n){var t=n.got,a=n.mapName,u=n.mapValue,o=n.mapped,f=r[e];t&&t.call(r,r,e,f);var c=a?a.call(r,r,e,f):e,i=u?u.call(r,r,e,f):f;return o&&o.call(r,r,c,i),{mappedName:c,mappedValue:i}}function o(r){return"object"==typeof r&&null!==r?r:"function"==typeof r?{by:r}:{}}function k(r,e){var n=r.type,t=r.create;return n?new n:t?t.call(e,e):{}}r.array2map=function E(r,e,n){if(v(r)){for(var t={},a=0;a<r.length;a++){var u=r[a],o=c(u,e),f=c(u,n);t[o]=f}return t}},r.assign=function N(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var t=l(e),a=t.hierarchies,u=t.prop,o=t.value,f=i(r,a);return f[u]=o,f},r.assignIfUndef=function w(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var t=l(e),a=t.hierarchies,u=t.prop,o=t.value,f=i(r,a);return f[u]===undefined&&(f[u]=o),f},r.assignProp=function f(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return a(r,u(e)).current},r.assignPropIfUndef=function I(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var t=u(e),a=i(r,t.slice(0,-1));return i(a,t.slice(-1)),a},r.exist=j,r.get=c,r.group=function U(i){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];if(!r.length)return i;var n=Array.prototype.concat.apply([],r).map(o).filter(function(r){return r.by});if(!n.length)return i;var l,p=n.length-1;return s(i).forEach(function(u){var o,f,c=i[u];n.forEach(function(r,e){var n=r.by;o=0===e?(l||(l=k(r,i)),l):(o[f]||(o[f]=k(r,i)),o[f]);var t=n.call(i,i,u,c);if(e!==p)f=t;else{o[t]||(o[t]=y(i));var a=o[t];v(a)?a.push(c):a[u]=c}})}),l},r.map2array=function e(u,o,f){if(u){var c=[];return s(u).forEach(function(r){var e,n=u[r],t="function"==typeof o?o.call(u,u,r,n):o,a="function"==typeof f?f.call(u,u,r,n):f;c.push(((e={})[t]=r,e[a]=n,e))}),c}},r.pick=function V(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var t=[];return r!==undefined&&null!==r&&function c(n,t,a,u){var o=O(a[u]),r=p(n,o),f=a.length-1;r.forEach(function(r){if(r in n){var e=P(n,r,o).mappedValue;u<f?c(e,t,a,u+1):t.push(e)}})}(r,t,e,0),t},r.put=function x(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var t=l(e),a=t.hierarchies,u=t.prop,o=t.value;return i(r,a)[u]=o},r.putIfUndef=function M(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var t=l(e),a=t.hierarchies,u=t.prop,o=t.value,f=i(r,a);return f[u]===undefined&&(f[u]=o),f[u]},r.putProp=function S(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return a(r,u(e)).last},r.putPropIfUndef=function _(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return i(r,u(e))},r.redim=function D(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!r)return r;var u=Array.prototype.concat.apply([],e);if(!u.length)return r;if(!(Math.min.apply(Math,u)<0)){var o=Math.max.apply(Math,u),f=u.length-1,c=function p(r,e){void 0===e&&(e=16);var n=[];if(h(r))for(var u=v(r)?Array:Object,o=[r],t=function(r){var t=Array,a=[];if(o.forEach(function(n){s(n).forEach(function(r){var e=n[r];h(e)&&(v(e)||(t=Object),a.push(e))})}),n.push(u),!a.length)return"break";u=t,o=a},a=0;a<=e&&"break"!==t();a++);return n}(r,o);if(c.length&&!(o>=c.length)){var i=new c[u[0]],l=function l(n,t,a){if(a<=o)s(t).forEach(function(r){var e=a+1;j(t,r)&&l(n.concat(r),t[r],e)});else{var r=u.map(function(r,e){return e<f?{name:n[r],type:c[u[e+1]]}:{name:n[r],value:t}});g(i,r)}};return l([],r,0),i}}},r.select=function H(r){for(var e,n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return r!==undefined&&null!==r&&function l(a,u,o,f){var c=O(o[f]),r=p(a,c),i=o.length-1;r.forEach(function(r){if(r in a){var e=P(a,r,c),n=e.mappedName,t=e.mappedValue;u[n]=f<i?y(t):t,f<i&&"object"==typeof t&&null!==t&&l(t,u[n],o,f+1)}})}(r,e=y(r),n,0),e},r.set=function R(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var t=l(e),a=t.hierarchies,u=t.prop,o=t.value,f=r||{};return i(f,a)[u]=o,f},r.setIfUndef=function q(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var t=l(e),a=t.hierarchies,u=t.prop,o=t.value,f=r||{},c=i(f,a);return c[u]===undefined&&(c[u]=o),f},r.setProp=g,r.setPropIfUndef=function z(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var t=r||{};return i(t,u(e)),t},r.traverse=function B(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var t=A(e),a=t.hierarchies,o=t.callback,f=r;f!==undefined&&null!==f&&a.every(function(r){var e=m(r),n=b(f,e),t=n.name,a=n.value,u=f;return f=a,!1!==o.call(u,u,t,f)})},r.traverseReverse=function C(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var t=A(e),a=t.hierarchies,u=t.callback,o=r;if(o!==undefined&&null!==o){var f=[];a.every(function(r){var e=m(r),n=b(o,e),t=n.name,a=n.value,u=o;return o=a,f.push({parent:u,name:t,current:o}),o});for(var c=f.length-1;0<=c;c--){var i=f[c];if(!1===u.call(i.parent,i.parent,i.name,i.current))break}}},Object.defineProperty(r,"__esModule",{value:!0})});
