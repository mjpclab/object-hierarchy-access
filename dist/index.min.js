!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e=e||self).ObjectHierarchyAccess={})}(this,function(e){"use strict";function v(e){return Array.isArray(e)||e instanceof Array}function s(n){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n).filter(function(e){var r=Object.getOwnPropertyDescriptor(n,e);return r&&r.enumerable});r.length&&e.push.apply(e,r)}return e}function h(e){return v(e)?[]:"object"==typeof e&&null!==e?{}:e}function y(e,r){var n=r.name,t=r.getName;return n!==undefined?n:t?t.call(e,e):void 0}function p(e,r){var n=r.names,t=r.getNames;if(n!==undefined)return v(n)?n:[n];if(t){var a=t.call(e,e);if(a!==undefined)return v(a)?a:[a]}return s(e)}function t(e,r,h){var d=e;return r.forEach(function(e){var r=function v(e){return"object"==typeof e&&null!==e?e:"function"==typeof e?{getName:e,value:{}}:{name:e,value:{}}}(e),n=r.value,t=r.type,a=r.create,u=r.override,o=r.created,f=r.skipped,c=r.got,i=function s(e,r){var n=y(e,r);return n!==undefined?n:"undefined"}(d,r);if(h||u||!d[i]||"object"!=typeof d[i]){var l=n||(t?new t:a?a.call(d,d,i):{});d[i]=l,o&&o.call(d,d,i,l)}else f&&f.call(d,d,i,d[i]);var p=d;d=d[i],c&&c.call(p,p,i,d)}),d}function i(e,r){return t(e,r)}function a(e,r){var n=t(e,r.slice(0,-1));return{current:n,last:t(n,r.slice(-1),!0)}}function l(e){var r=e[e.length-1],n=Array.prototype.concat.apply([],e.slice(0,-1));return{hierarchies:n.slice(0,-1),prop:n[n.length-1],value:r}}function u(e){return Array.prototype.concat.apply([],e)}function d(e){return"object"==typeof e?e:"function"==typeof e?{getValue:e}:{name:e}}function g(e,r){var n,t=r.getValue,a=y(e,r);a!==undefined?n=e[a]:(a="undefined",t&&(n=t.call(e,e)));var u=r.got;return u&&u.call(e,e,a,n),{name:a,value:n}}function c(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=Array.prototype.concat.apply([],r),a=e;return a!==undefined&&null!==a&&t.every(function(e){var r=d(e),n=g(a,r).value;return a=n}),a}function m(e){var r=e[e.length-1];return{hierarchies:Array.prototype.concat.apply([],e.slice(0,-1)),callback:r}}function b(e){return v(e)?{names:e}:"object"==typeof e&&null!==e?e:"function"==typeof e?{getNames:e}:{names:e}}function j(e,r,n){var t=n.got,a=n.mapName,u=n.mapValue,o=n.mapped,f=e[r];t&&t.call(e,e,r,f);var c=a?a.call(e,e,r,f):r,i=u?u.call(e,e,r,f):f;return o&&o.call(e,e,c,i),{mappedName:c,mappedValue:i}}function o(e){return"object"==typeof e&&null!==e?e:"function"==typeof e?{by:e}:{}}function A(e,r){var n=e.type,t=e.create;return n?new n:t?t.call(r,r):{}}e.array2map=function P(e,r,n){if(v(e)){for(var t={},a=0;a<e.length;a++){var u=e[a],o=c(u,r),f=c(u,n);t[o]=f}return t}},e.assign=function O(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=l(r),a=t.hierarchies,u=t.prop,o=t.value,f=i(e,a);return f[u]=o,f},e.assignIfUndef=function k(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=l(r),a=t.hierarchies,u=t.prop,o=t.value,f=i(e,a);return f[u]===undefined&&(f[u]=o),f},e.assignProp=function f(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return a(e,u(r)).current},e.assignPropIfUndef=function N(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=u(r),a=i(e,t.slice(0,-1));return i(a,t.slice(-1)),a},e.exist=function E(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(e===undefined||null===e)return!1;for(var t=Array.prototype.concat.apply([],r),a=e,u=0;u<t.length;u++){var o=t[u];if(!(a&&o in a))return!1;a=a[o]}return!0},e.get=c,e.group=function I(i){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(!e.length)return i;var n=Array.prototype.concat.apply([],e).map(o).filter(function(e){return e.by});if(!n.length)return i;var l,p=n.length-1;return s(i).forEach(function(u){var o,f,c=i[u];n.forEach(function(e,r){var n=e.by;o=0===r?(l||(l=A(e,i)),l):(o[f]||(o[f]=A(e,i)),o[f]);var t=n.call(i,i,u,c);if(r!==p)f=t;else{o[t]||(o[t]=h(i));var a=o[t];v(a)?a.push(c):a[u]=c}})}),l},e.map2array=function r(u,o,f){if(u){var c=[];return s(u).forEach(function(e){var r,n=u[e],t="function"==typeof o?o.call(u,u,e,n):o,a="function"==typeof f?f.call(u,u,e,n):f;c.push(((r={})[t]=e,r[a]=n,r))}),c}},e.pick=function U(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=[];return e!==undefined&&null!==e&&function c(n,t,a,u){var o=b(a[u]),e=p(n,o),f=a.length-1;e.forEach(function(e){if(e in n){var r=j(n,e,o).mappedValue;u<f?c(r,t,a,u+1):t.push(r)}})}(e,t,r,0),t},e.put=function V(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=l(r),a=t.hierarchies,u=t.prop,o=t.value;return i(e,a)[u]=o},e.putIfUndef=function w(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=l(r),a=t.hierarchies,u=t.prop,o=t.value,f=i(e,a);return f[u]===undefined&&(f[u]=o),f[u]},e.putProp=function x(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return a(e,u(r)).last},e.putPropIfUndef=function S(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return i(e,u(r))},e.select=function _(e){for(var r,n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return e!==undefined&&null!==e&&function l(a,u,o,f){var c=b(o[f]),e=p(a,c),i=o.length-1;e.forEach(function(e){if(e in a){var r=j(a,e,c),n=r.mappedName,t=r.mappedValue;u[n]=f<i?h(t):t,f<i&&"object"==typeof t&&null!==t&&l(t,u[n],o,f+1)}})}(e,r=h(e),n,0),r},e.set=function D(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=l(r),a=t.hierarchies,u=t.prop,o=t.value,f=e||{};return i(f,a)[u]=o,f},e.setIfUndef=function H(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=l(r),a=t.hierarchies,u=t.prop,o=t.value,f=e||{},c=i(f,a);return c[u]===undefined&&(c[u]=o),f},e.setProp=function M(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=e||{};return a(t,u(r)),t},e.setPropIfUndef=function R(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=e||{};return i(t,u(r)),t},e.traverse=function q(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=m(r),a=t.hierarchies,o=t.callback,f=e;f!==undefined&&null!==f&&a.every(function(e){var r=d(e),n=g(f,r),t=n.name,a=n.value,u=f;return f=a,!1!==o.call(u,u,t,f)})},e.traverseReverse=function z(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var t=m(r),a=t.hierarchies,u=t.callback,o=e;if(o!==undefined&&null!==o){var f=[];a.every(function(e){var r=d(e),n=g(o,r),t=n.name,a=n.value,u=o;return o=a,f.push({parent:u,name:t,current:o}),o});for(var c=f.length-1;0<=c;c--){var i=f[c];if(!1===u.call(i.parent,i.parent,i.name,i.current))break}}},Object.defineProperty(e,"__esModule",{value:!0})});
